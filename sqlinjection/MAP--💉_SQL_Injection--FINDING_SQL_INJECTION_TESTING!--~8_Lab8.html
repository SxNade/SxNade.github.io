<!doctype html><html>
    <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
      <title>#8 Lab8</title>
      <meta name="generator" content="CherryTree">
      <link rel="stylesheet" href="res/styles3.css" type="text/css" />
    </head>
    <body><div class='page'><h1 class='title'>#8 Lab8</h1><br/><strong><h3>Lab: SQL injection attack, querying the database type and version on MySQL and Microsoft</h3></strong><br /><br /><br /><a name="SQL_INJECTION_UNION-METHOD_FINDING_DB-VERSION_{MSSQL-and-MYSQL}"></a><br />ok so now we are probing MSSQL and MYSQL<br /><a href=""><img src="images/20-1.png" alt="images/20-1.png" /></a><br /><br />like the previous lab this lab also has a vuln which can be exploited using UNION method to extract database contents<br /><br />as with any SQL injection flow we will start by probing the number of columns<br /><br /><strong><h3>‚Ä¢ Note here</h3></strong><br /><br /><a name="SQL_INJECTION_TIP_ABOUT_CHAR_FILTERING"></a><br /><br />After using standard payloads here we realise that the application does not accept the Query now in this case we try to change we are using the comment chars, instead of <span style="color:#00ff00;">-- </span>we use <span style="color:#00ff00;">#</span> and also this time we will utilize burp Suite for correct URL encoding for special chars such as #...<br /><br />we have selected <span style="color:#ff0000;">URL encode as you type</span> for more convinience<br /><br /><div class="codebox"><div class="codebox"><span style="color:#3ad900;font-weight:400">&#39;&nbsp;ORDER&nbsp;BY&nbsp;1#</span><br /></div></div><br /><br />in this approach also we keep increasing the number of <span style="color:#ff0000;">ORDER BY</span><br /><br /><a href=""><img src="images/20-2.png" alt="images/20-2.png" /></a><br /><br /><a href=""><img src="images/20-3.png" alt="images/20-3.png" /></a><br /><br />and as soon as we increase it to 3 we get internal server error which means that there are 2 columns and now we will move into extracting the needed info but before we need to see what gets printed..<br /><br /><div class="codebox"><div class="codebox"><span style="color:#3ad900;font-weight:400">&#39;&nbsp;UNION&nbsp;SELECT&nbsp;&#39;</span><span style="color:#ff0044;font-weight:400">11</span><span style="color:#3ad900;font-weight:400">&#39;,&nbsp;NULL#</span><br /></div></div><br /><a href=""><img src="images/20-4.png" alt="images/20-4.png" /></a><br /><br />now just as a check we will try to print both columns as string at once {<span style="color:#ff0000;">not required here though</span>}<br /><div class="codebox"><div class="codebox"><span style="color:#3ad900;font-weight:400">&#39;&nbsp;UNION&nbsp;SELECT&nbsp;&#39;</span><span style="color:#ff0044;font-weight:400">11</span><span style="color:#3ad900;font-weight:400">&#39;,&nbsp;&#39;</span><span style="color:#ff0044;font-weight:400">11</span><span style="color:#3ad900;font-weight:400">&#39;#</span><br /></div></div><br /><a href=""><img src="images/20-5.png" alt="images/20-5.png" /></a><br /><br />Now we will try extracting the version<br /><br />again we turn to the cheat sheet<br /><a href=""><img src="images/20-6.png" alt="images/20-6.png" /></a><br /><br />and we can see that both Microsoft{MSSQL} and MySQL use same convention of <span style="color:#ff0000;">@@version</span><br /><br />so now our payload will be<br /><br /><div class="codebox"><div class="codebox"><span style="color:#3ad900;font-weight:400">&#39;&nbsp;UNION&nbsp;SELECT&nbsp;@@version,&nbsp;NULL#</span><br /></div></div><br /><br />and this will give us the version<br /><a href=""><img src="images/20-7.png" alt="images/20-7.png" /></a><br /><br /><br />and now we will open this link from burp into browser...<br /><a href=""><img src="images/20-8.png" alt="images/20-8.png" /></a><br /><br />and we have solved the lab üòÄÔ∏è<br /><br /></div></body></html>